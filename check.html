<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #boat_game{
            display: none;
        }
        body {
            margin: 0;
            overflow: hidden;
        }

        .pirate_ships {
            width: 6%;
        }

        #canon {
            position: absolute;
            left: 50%;
            top: 70%;
            transform: translate(-50%, -50%);
            width: 100%;
        }

        #shoot_button {
            position: absolute;
            top: 85%;
            left: 40%;
            transform: translate(-50%, -50%);
            font-size: 35px;
            padding: 5px 12px 5px 10px;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            border-radius: 5px;
            border: 2px solid black;
        }

        #ball {
            position: absolute;
            width: 7%;
            left: 14.5%;
            top: 80%;
            transform: translate(-50%, -50%);
            visibility: hidden;
        }

        #gun {
            position: absolute;
            height: 75%;
            width: 30%;
            left: 60%;
            top: 55%;
            transform: translate(-50%, -50%);
            overflow: hidden;
        }
        #sea{
            height: 20%;
            width: 80%;
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translate(-50%,-50%);
        }
        #pirate_ship1{
            position: absolute;
            top: 30%;
            left: 30%;
        }
        #pirate_ship2{
            position: absolute;
            top: 70%;
            left: 80%;
        }
        #pirate_ship3{
            position: absolute;
            top: -10%;
        }
        #deg{
            position: absolute;
            top: 82%;
            left: 25%;
            transform: translate(-50%,-50%);
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 15px;
            color: rgba(0, 0, 0, 0.5);
        }
        #score{
            position: absolute;
            height: 40%;
            width: 25%;
            top: 40%;
            left: 50%;
            transform: translate(-50%,-50%);
            border: 2px solid black;
            border-radius: 10px;
            display: none;
        }
        #result_image{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: 80%;
        }
        #restart_button{
            position: absolute;
            top: 80%;
            left: 50%;
            transform: translate(-50%,-50%);
            font-size: 20px;
            padding: 5px 12px 5px 10px;
            border-radius: 10px;
            border: 1px solid black;
        }
        #result_message{
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translate(-50%,-50%);
            font-family: 'Courier New', Courier, monospace
        }
        #counter{
            position: absolute;
            top: 10%;
            left: 90%;
            transform: translate(-50%,-50%);
            height: 10%;
            width: 10%;
            border: 2px solid black;
            border-radius: 10px;
        }
        #count_image{
            position: absolute;
            top: 50%;
            left: 60%;
            transform: translate(-50%,-50%);
            width: 90%;
        }
        #count{
            position: absolute;
            top: 15%;
            left: 20%;
            transform: translate(-50%,-50%);
            font-size: 50px;
            font-family: 'Courier New', Courier, monospace;
        }
        #task_head{
            position: absolute;
            top: 7%;
            left: 50%;
            transform: translate(-50%,-50%);
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            color: rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body>
    <div id="boat_game">
        <div id="score">
            <h1 id="result_message">COMPLETED!</h1>
            <img src="./images/result.png" id="result_image" alt="">
            <button id="restart_button" onclick="location.reload();">Restart Module</button>
        </div>
        <div id="game1">
            <h1 id="task_head">Shoot the ship when it aligns at 90</h1>
            <div id="sea">
                <img src="./images/pirate-ship.png" id="pirate_ship1" class="pirate_ships" alt="">
                <img src="./images/pirate-ship.png" id="pirate_ship2" class="pirate_ships" alt="">
                <img src="./images/pirate-ship.png" id="pirate_ship3" class="pirate_ships" alt="">
            </div>
            
            <div id="gun">
                <p id="deg">90Â°</p>
                <img src="./images/canon_main.png" id="canon" alt="">
                <img src="./images/ball.png" id="ball" alt="">
            </div>
            <div id="counter">
                <h1 id="count">0</h1>
                <img src="./images/count.png" id="count_image" alt="">
            </div>
            <button id="shoot_button">FIRE</button>
        </div>
    </div>
    
    
    <script>
        var count = 0;
        var ball = document.getElementById('ball');
        var shootButton = document.getElementById('shoot_button');
        var pirateShips = [
            document.getElementById('pirate_ship1'),
            document.getElementById('pirate_ship2'),
            document.getElementById('pirate_ship3')
        ];
        var isShooting = false; 
        var initialTop = 80;
    
        shootButton.addEventListener('click', function() {
            if (isShooting) return; 
    
            isShooting = true; 
            ball.style.visibility = 'visible';
            let position = initialTop;
    
            var interval = setInterval(function() {
                position -= 1;
                ball.style.top = position + '%';
    
                pirateShips.forEach((ship, index) => {
                    if (ship.style.visibility !== 'hidden' && isCollision(ball, ship)) {
                        count++;
                        document.getElementById('count').innerHTML=count;
                        ship.style.visibility = 'hidden';
                        ball.style.visibility = 'hidden';
                        clearInterval(interval); 
                        ball.style.top = initialTop + '%';
                        isShooting = false;
    
                        if (allShipsDestroyed()) {
                            gameOver();
                        }
                    }
                });
    
                if (position < -10) {
                    clearInterval(interval);
                    ball.style.visibility = 'hidden';
                    ball.style.top = initialTop + '%';
                    isShooting = false;
                }
            }, 20);
        });
    
        function isCollision(ball, ship) {
            var ballRect = ball.getBoundingClientRect();
            var shipRect = ship.getBoundingClientRect();
    
            return !(
                ballRect.right < shipRect.left ||
                ballRect.left > shipRect.right ||
                ballRect.bottom < shipRect.top ||
                ballRect.top > shipRect.bottom
            );
        }
    
        function allShipsDestroyed() {
            return pirateShips.every(ship => ship.style.visibility === 'hidden');
        }
    
        function gameOver() {
            document.getElementById('game1').style.display='none';
            document.getElementById('score').style.display='block';
        }
    </script>
    
    <script>
        var pirateShips = [
            document.getElementById('pirate_ship1'),
            document.getElementById('pirate_ship2'),
            document.getElementById('pirate_ship3')
        ];
        var sea = document.getElementById('sea');
    
        var directions = [true, true, true];
    
        function moveShips() {
            pirateShips.forEach((ship, index) => {
                let left = parseFloat(ship.style.left);
    
                if (directions[index]) {
                    left += 0.3;
                } else {
                    left -= 0.3;
                }
    
                if (left >= 100) {
                    directions[index] = false; 
                    ship.style.transform = 'scaleX(-1)'; 
                } else if (left <= 0) {
                    directions[index] = true; 
                    ship.style.transform = 'scaleX(1)'; 
                }
    
                ship.style.left = left + '%';
            });
        }
    
        pirateShips.forEach((ship, index) => {
            ship.style.left = index * 30 + '%';
            ship.style.transition = 'transform 0.1s';
        });
    
        setInterval(moveShips, 20);
    </script>
    
</body>
</html>
